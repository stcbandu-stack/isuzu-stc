import{s as S}from"./supabase.Br-sM2rM.js";import{_ as B}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as u,F as w,r as U,b as e,s as M,i as z,q as I,h as m,o as c,n as p,t as b,e as j}from"./runtime-core.esm-bundler.CuQQ-MJ5.js";const Z={__name:"HeroSlideshow",props:{autoplay:{type:Boolean,default:!0},interval:{type:Number,default:5e3}},setup(v,{expose:o}){o();const d=v,l=[{image_url:"/images/slide-1.png",alt:"ISUZU D-MAX",title:"ISUZU D-MAX",description:"พิชิตทุกเส้นทาง ด้วยพลังที่เหนือกว่า",button_text:"ดูรายละเอียด",button_link:"#dmax"},{image_url:"/images/slide-2.png",alt:"ISUZU MU-X",title:"ISUZU MU-X",description:"SUV พรีเมียม สำหรับทุกไลฟ์สไตล์",button_text:"ดูรายละเอียด",button_link:"#mux"},{image_url:"/images/slide-3.png",alt:"ISUZU Fleet",title:"บริการรถยนต์สำหรับองค์กร",description:"โซลูชั่นครบวงจรสำหรับธุรกิจของคุณ",button_text:"ติดต่อเรา",button_link:"#contact"}],n=m(l),a=m(0),r=m(0);let t=null,i=null;const f=async()=>{try{const{data:s,error:k}=await S.from("slides").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(k){console.error("Error fetching slides:",k);return}s&&s.length>0?n.value=s:console.log("No active slides found in DB, using default.")}catch(s){console.error("Unexpected error:",s)}},y=()=>{a.value=(a.value+1)%n.value.length,g()},C=()=>{a.value=(a.value-1+n.value.length)%n.value.length,g()},T=s=>{a.value=s,g()},g=()=>{r.value=0},h=()=>{d.autoplay&&(i=setInterval(()=>{r.value+=100/(d.interval/100),r.value>=100&&(r.value=0)},100),t=setInterval(()=>{y()},d.interval))},_=()=>{t&&clearInterval(t),i&&clearInterval(i)};z(()=>{f(),h()}),I(()=>{_()});const x={props:d,defaultSlides:l,slides:n,currentSlide:a,progress:r,get autoplayTimer(){return t},set autoplayTimer(s){t=s},get progressTimer(){return i},set progressTimer(s){i=s},fetchSlides:f,nextSlide:y,prevSlide:C,goToSlide:T,resetProgress:g,startAutoplay:h,stopAutoplay:_,ref:m,onMounted:z,onUnmounted:I,get supabase(){return S}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},A={class:"relative w-full overflow-hidden",style:{aspectRatio:"16/9"}},D=["src","alt"],N={class:"absolute inset-0 flex items-end justify-start p-8 md:p-16"},X={class:"max-w-2xl"},F=["href"],V={class:"absolute bottom-6 left-1/2 -translate-x-1/2 z-20 flex space-x-3"},q=["onClick"],E={class:"sr-only"},H={class:"absolute bottom-0 left-0 right-0 h-1 bg-white/20 z-20"};function P(v,o,d,l,n,a){return c(),u("div",A,[(c(!0),u(w,null,U(l.slides,(r,t)=>(c(),u("div",{key:t,class:p(["absolute inset-0 transition-opacity duration-1000 ease-in-out",l.currentSlide===t?"opacity-100 z-10":"opacity-0 z-0"])},[e("img",{src:r.image_url,alt:r.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,D),o[0]||(o[0]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-slate-900/80 via-slate-900/20 to-transparent"},null,-1)),e("div",N,[e("div",X,[e("h2",{class:p(["text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-4 transform transition-all duration-700",l.currentSlide===t?"translate-y-0 opacity-100":"translate-y-8 opacity-0"]),style:{"transition-delay":"200ms"}},b(r.title),3),e("p",{class:p(["text-gray-300 text-sm md:text-lg mb-6 transform transition-all duration-700",l.currentSlide===t?"translate-y-0 opacity-100":"translate-y-8 opacity-0"]),style:{"transition-delay":"400ms"}},b(r.description),3),r.button_text?(c(),u("a",{key:0,href:r.button_link,class:p(["inline-block bg-isuzu-red hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 transform",l.currentSlide===t?"translate-y-0 opacity-100":"translate-y-8 opacity-0"]),style:{"transition-delay":"600ms"}},b(r.button_text),11,F)):j("",!0)])])],2))),128)),e("div",V,[(c(!0),u(w,null,U(l.slides,(r,t)=>(c(),u("button",{key:t,onClick:i=>l.goToSlide(t),class:p(["group relative w-3 h-3 rounded-full transition-all duration-300",l.currentSlide===t?"bg-isuzu-red w-8":"bg-white/50 hover:bg-white/80"])},[e("span",E,"Go to slide "+b(t+1),1)],10,q))),128))]),e("button",{onClick:l.prevSlide,class:"absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-black/30 hover:bg-isuzu-red text-white p-3 rounded-full transition-all duration-300 hover:scale-110 backdrop-blur-sm"},[...o[1]||(o[1]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:l.nextSlide,class:"absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-black/30 hover:bg-isuzu-red text-white p-3 rounded-full transition-all duration-300 hover:scale-110 backdrop-blur-sm"},[...o[2]||(o[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("div",H,[e("div",{class:"h-full bg-isuzu-red transition-all duration-100 ease-linear",style:M({width:`${l.progress}%`})},null,4)])])}const R=B(Z,[["render",P]]);export{R as default};
