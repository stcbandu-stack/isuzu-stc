import{w as P,v as Z,a as m}from"./runtime-dom.esm-bundler.CxwZsN_f.js";import{s as f}from"./supabase.Br-sM2rM.js";import{D as X,t as d}from"./DeleteConfirmModal.DT2sAnjA.js";import{_ as Q}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{o as s,c as i,b as e,t as x,w as c,a as J,e as v,d as E,F as R,r as G,s as K,m as A,f as O,g as T,h as a,k as W,i as I}from"./runtime-core.esm-bundler.CuQQ-MJ5.js";const Y={__name:"VehicleEditor",props:{vehicle:Object},emits:["close","saved"],setup(j,{expose:o,emit:h}){o();const t=j,y=h,_=T(()=>!!t.vehicle),r=a(!1),u=a(!1),p=a(!1),C=a(!1),U=a([]),F=a(!1),D=a(null),S=a(!1),M=a(null),w=a({model_category:"V-Cross",sub_model:"",engine:"",grade:"",price:0,image_url:"",direct_url:""}),V=a({color_name:"",color_hex:"#ffffff",image_url:"",price_extra:0,direct_url:""}),z=async l=>{if(l){C.value=!0;try{console.log("Fetching colors for vehicleId:",l);const{data:b,error:g}=await f.from("vehicle_colors").select("*").eq("vehicle_id",l);if(g)throw g;U.value=b||[],console.log("Fetched colors result:",U.value)}catch(b){console.error("Error fetching colors:",b),d.error("ไม่สามารถโหลดข้อมูลสีได้: "+b.message)}finally{C.value=!1}}};O(()=>t.vehicle,async l=>{l?(w.value={...l},await z(l.id)):(w.value={model_category:"V-Cross",sub_model:"",engine:"",grade:"",price:0,image_url:"",direct_url:""},U.value=[])},{immediate:!0});const n=async()=>{if(!r.value){r.value=!0;try{let l;if(_.value){const{data:b,error:g}=await f.from("vehicles").update(w.value).eq("id",t.vehicle.id).select().single();if(g)throw g;l=b}else{const{data:b,error:g}=await f.from("vehicles").insert([w.value]).select().single();if(g)throw g;l=b}d.success("บันทึกข้อมูลเรียบร้อยแล้ว"),y("saved"),y("close")}catch(l){d.error("เกิดข้อผิดพลาดในการบันทึก: "+l.message)}finally{r.value=!1}}},k=(l=null)=>{D.value=l,l?V.value={...l}:V.value={color_name:"",color_hex:"#ffffff",image_url:"",price_extra:0,direct_url:""},F.value=!0},B=()=>{F.value=!1,D.value=null},N={props:t,emit:y,isEditing:_,saving:r,savingColor:u,uploading:p,loadingColors:C,colors:U,showColorModal:F,editingColor:D,showDeleteColorModal:S,colorToDelete:M,form:w,colorForm:V,fetchColors:z,saveVehicle:n,openColorModal:k,closeColorModal:B,saveColor:async()=>{if(!u.value){u.value=!0;try{const l={...V.value,vehicle_id:t.vehicle.id};D.value?await f.from("vehicle_colors").update(l).eq("id",D.value.id):await f.from("vehicle_colors").insert([l]),d.success("บันทึกสีเรียบร้อยแล้ว"),await z(t.vehicle.id),B()}catch(l){d.error("เกิดข้อผิดพลาดในการบันทึกสี: "+l.message)}finally{u.value=!1}}},initiateDeleteColor:l=>{M.value=l,S.value=!0},closeDeleteColorModal:()=>{S.value=!1,M.value=null},executeDeleteColor:async()=>{if(M.value)try{await f.from("vehicle_colors").delete().eq("id",M.value.id),d.success("ลบสีเรียบร้อยแล้ว"),await z(t.vehicle.id)}catch(l){d.error("เกิดข้อผิดพลาดในการลบสี: "+l.message)}},handleFileUpload:async(l,b="main")=>{const g=l.target.files[0];if(g){p.value=!0;try{const L=`${Date.now()}_${g.name}`,{data:ho,error:H}=await f.storage.from("slides").upload(L,g);if(H)throw H;const{data:{publicUrl:q}}=f.storage.from("slides").getPublicUrl(L);b==="main"?w.value.image_url=q:V.value.image_url=q,d.success("อัปโหลดรูปภาพเสร็จสิ้น")}catch(L){d.error("การอัปโหลดล้มเหลว: "+L.message)}finally{p.value=!1}}},formatPrice:l=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0}).format(l),ref:a,computed:T,watch:O,get supabase(){return f},get toast(){return d},DeleteConfirmModal:X};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},$={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4 overflow-y-auto backdrop-blur-sm"},ee={class:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-5xl border border-gray-700 flex flex-col max-h-[90vh]"},oe={class:"p-6 border-b border-gray-700 flex justify-between items-center bg-gray-800 rounded-t-xl sticky top-0 z-10"},te={class:"text-xl font-bold text-white"},re={class:"p-6 overflow-y-auto flex-1 space-y-8"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"flex gap-4 items-start"},ie={class:"w-48 h-28 bg-gray-900 border border-gray-600 rounded overflow-hidden flex-shrink-0"},ne=["src"],ae={key:1,class:"w-full h-full flex items-center justify-center text-gray-600 text-xs"},de={class:"flex-1 space-y-2"},ce={class:"inline-flex items-center px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-600 text-sm text-gray-300 transition-colors"},ue={key:0,class:"text-xs text-yellow-400"},ge={class:"flex justify-end pt-4"},me=["disabled"],fe={key:0,class:"space-y-6 pt-6 border-t border-gray-700"},xe={class:"flex justify-between items-center"},be={class:"flex items-center gap-4"},ye={key:0,class:"flex items-center text-xs text-gray-500 gap-2"},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"space-y-2"},he={class:"w-12 h-8 bg-black rounded overflow-hidden"},_e=["src"],we={class:"flex-1 min-w-0"},ke=["title"],Ce={class:"text-xs text-gray-400 font-mono"},De={key:0,class:"text-xs text-green-400 mt-1"},Me={class:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Ve=["onClick"],ze=["onClick"],Ue={key:0,class:"col-span-full text-center py-6 text-gray-500 bg-gray-700/20 rounded-lg border border-dashed border-gray-700"},je={key:1,class:"text-center py-8 text-gray-500 bg-gray-700/20 rounded-lg border border-dashed border-gray-700"},Fe={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm"},Se={class:"bg-gray-800 rounded-xl shadow-xl w-full max-w-md border border-gray-600"},Ee={class:"p-4 border-b border-gray-700 flex justify-between items-center"},Le={class:"text-lg font-bold text-white"},Te={class:"flex gap-4"},Be={class:"flex-1"},Ne={class:"flex gap-2"},He={class:"w-1/3"},qe={class:"flex gap-2"},Pe={class:"px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded cursor-pointer text-white text-sm"},Oe={class:"flex justify-end pt-2"},Ie=["disabled"],Xe={key:0,class:"animate-spin h-3 w-3 border-b-2 border-white rounded-full"};function Qe(j,o,h,t,y,_){return s(),i("div",$,[e("div",ee,[e("div",oe,[e("h3",te,x(t.isEditing?"แก้ไขข้อมูลรถยนต์":"เพิ่มรถยนต์ใหม่"),1),e("button",{onClick:o[0]||(o[0]=r=>j.$emit("close")),class:"text-gray-400 hover:text-white"},[...o[16]||(o[16]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",re,[e("form",{onSubmit:P(t.saveVehicle,["prevent"]),class:"space-y-6"},[o[27]||(o[27]=e("h4",{class:"text-lg font-semibold text-isuzu-red border-b border-gray-700 pb-2"},"1. ข้อมูลทั่วไป",-1)),e("div",le,[e("div",null,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Model Category",-1)),c(e("select",{"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.model_category=r),class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none"},[...o[17]||(o[17]=[J('<option value="V-Cross">V-Cross</option><option value="Mu-X">Mu-X</option><option value="Spark">Spark</option><option value="2 Drs">2 Drs (Spacab/Hi-Lander)</option><option value="4 Drs">4 Drs (Cab4/Hi-Lander)</option><option value="X-Series">X-Series</option>',6)])],512),[[Z,t.form.model_category]])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Sub Model",-1)),c(e("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.sub_model=r),type:"text",placeholder:"e.g. Hi-Lander 4 Doors",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none",required:""},null,512),[[m,t.form.sub_model]])]),e("div",null,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Grade",-1)),c(e("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.grade=r),type:"text",placeholder:"e.g. Z or M AT",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none"},null,512),[[m,t.form.grade]])]),e("div",null,[o[21]||(o[21]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Engine",-1)),c(e("input",{"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.engine=r),type:"text",placeholder:"e.g. 1.9 Ddi",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none"},null,512),[[m,t.form.engine]])]),e("div",null,[o[22]||(o[22]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Price (THB)",-1)),c(e("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>t.form.price=r),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none",required:""},null,512),[[m,t.form.price,void 0,{number:!0}]])]),e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Direct URL",-1)),c(e("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>t.form.direct_url=r),type:"text",placeholder:"Optional",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none"},null,512),[[m,t.form.direct_url]])])]),e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"รูปภาพหลัก (Default Image)",-1)),e("div",se,[e("div",ie,[t.form.image_url?(s(),i("img",{key:0,src:t.form.image_url,class:"w-full h-full object-cover"},null,8,ne)):(s(),i("div",ae,"No Image"))]),e("div",de,[c(e("input",{"onUpdate:modelValue":o[7]||(o[7]=r=>t.form.image_url=r),type:"text",placeholder:"Image URL (or upload below)",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-isuzu-red focus:outline-none text-sm"},null,512),[[m,t.form.image_url]]),e("label",ce,[o[24]||(o[24]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),o[25]||(o[25]=e("span",null,"อัปโหลดรูป",-1)),e("input",{type:"file",class:"hidden",accept:"image/*",onChange:o[8]||(o[8]=r=>t.handleFileUpload(r,"main"))},null,32)]),t.uploading?(s(),i("p",ue,"Uploading...")):v("",!0)])])]),e("div",ge,[e("button",{type:"submit",class:"bg-isuzu-red hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",disabled:t.saving},x(t.isEditing?"บันทึกการแก้ไข":"สร้างข้อมูลรถยนต์"),9,me)])],32),t.isEditing?(s(),i("div",fe,[e("div",xe,[o[30]||(o[30]=e("h4",{class:"text-lg font-semibold text-isuzu-red"},"2. จัดการสี (Colors)",-1)),e("div",be,[t.loadingColors?(s(),i("div",ye,[...o[28]||(o[28]=[e("span",{class:"animate-spin h-3 w-3 border-b-2 border-isuzu-red rounded-full"},null,-1),E(" กำลังโหลดสี... ",-1)])])):v("",!0),e("button",{onClick:o[9]||(o[9]=r=>t.openColorModal()),class:"text-sm bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded flex items-center"},[...o[29]||(o[29]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" เพิ่มสี ",-1)])])])]),e("div",pe,[(s(!0),i(R,null,G(t.colors,r=>(s(),i("div",{key:r.id,class:"bg-gray-700/50 border border-gray-600 rounded-lg p-3 flex gap-3 group relative"},[e("div",ve,[e("div",{class:"w-12 h-12 rounded-lg shadow-sm ring-1 ring-white/10",style:K({backgroundColor:r.color_hex})},null,4),e("div",he,[r.image_url?(s(),i("img",{key:0,src:r.image_url,class:"w-full h-full object-cover"},null,8,_e)):v("",!0)])]),e("div",we,[e("p",{class:"font-medium text-white truncate text-sm",title:r.color_name},x(r.color_name),9,ke),e("p",Ce,x(r.color_hex),1),r.price_extra>0?(s(),i("p",De,"+"+x(t.formatPrice(r.price_extra)),1)):v("",!0)]),e("div",Me,[e("button",{onClick:u=>t.openColorModal(r),class:"p-1 text-gray-400 hover:text-white bg-gray-800 rounded"},[...o[31]||(o[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ve),e("button",{onClick:u=>t.initiateDeleteColor(r),class:"p-1 text-red-400 hover:text-red-300 bg-gray-800 rounded"},[...o[32]||(o[32]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ze)])]))),128)),!t.loadingColors&&t.colors.length===0?(s(),i("div",Ue," ยังไม่มีข้อมูลสีสำหรับรุ่นนี้ ")):v("",!0)])])):(s(),i("div",je," บันทึกข้อมูลรถยนต์เพื่อจัดการสี "))])]),t.showColorModal?(s(),i("div",Fe,[e("div",Se,[e("div",Ee,[e("h4",Le,x(t.editingColor?"แก้ไขสี":"เพิ่มสีใหม่"),1),e("button",{onClick:t.closeColorModal,class:"text-gray-400 hover:text-white"},"✕")]),e("form",{onSubmit:P(t.saveColor,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[o[33]||(o[33]=e("label",{class:"block text-xs text-gray-400 mb-1"},"ชื่อสี",-1)),c(e("input",{"onUpdate:modelValue":o[10]||(o[10]=r=>t.colorForm.color_name=r),type:"text",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-isuzu-red",required:""},null,512),[[m,t.colorForm.color_name]])]),e("div",Te,[e("div",Be,[o[34]||(o[34]=e("label",{class:"block text-xs text-gray-400 mb-1"},"รหัสสี (Hex)",-1)),e("div",Ne,[c(e("input",{"onUpdate:modelValue":o[11]||(o[11]=r=>t.colorForm.color_hex=r),type:"color",class:"h-9 w-9 bg-transparent border-0 p-0 cursor-pointer"},null,512),[[m,t.colorForm.color_hex]]),c(e("input",{"onUpdate:modelValue":o[12]||(o[12]=r=>t.colorForm.color_hex=r),type:"text",class:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm",required:""},null,512),[[m,t.colorForm.color_hex]])])]),e("div",He,[o[35]||(o[35]=e("label",{class:"block text-xs text-gray-400 mb-1"},"เพิ่มเงิน (+)",-1)),c(e("input",{"onUpdate:modelValue":o[13]||(o[13]=r=>t.colorForm.price_extra=r),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm"},null,512),[[m,t.colorForm.price_extra,void 0,{number:!0}]])])]),e("div",null,[o[37]||(o[37]=e("label",{class:"block text-xs text-gray-400 mb-1"},"รูปประจำสี (Optional)",-1)),e("div",qe,[c(e("input",{"onUpdate:modelValue":o[14]||(o[14]=r=>t.colorForm.image_url=r),type:"text",placeholder:"URL",class:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm"},null,512),[[m,t.colorForm.image_url]]),e("label",Pe,[o[36]||(o[36]=E(" UP ",-1)),e("input",{type:"file",class:"hidden",accept:"image/*",onChange:o[15]||(o[15]=r=>t.handleFileUpload(r,"color"))},null,32)])])]),e("div",Oe,[e("button",{type:"submit",class:"bg-isuzu-red hover:bg-red-700 text-white px-4 py-2 rounded text-sm font-medium disabled:opacity-50 flex items-center gap-2",disabled:t.savingColor},[t.savingColor?(s(),i("span",Xe)):v("",!0),E(" "+x(t.editingColor?"อัปเดต":"เพิ่ม"),1)],8,Ie)])],32)])])):v("",!0),A(t.DeleteConfirmModal,{isOpen:t.showDeleteColorModal,itemName:t.colorToDelete?t.colorToDelete.color_name:"",onClose:t.closeDeleteColorModal,onConfirmed:t.executeDeleteColor},null,8,["isOpen","itemName"])])}const Re=Q(Y,[["render",Qe]]),Ge={__name:"VehicleList",setup(j,{expose:o}){o();const h=a([]),t=a(!0),y=a(""),_=a(!1),r=a(null),u=a(!1),p=a(null),C=async()=>{t.value=!0;try{const{data:n,error:k}=await f.from("vehicles").select("*").order("model_category",{ascending:!0}).order("price",{ascending:!0});if(k)throw k;h.value=n||[]}catch(n){d.error("ไม่สามารถโหลดข้อมูลรถได้: "+n.message)}finally{t.value=!1}},U=T(()=>{if(!y.value)return h.value;const n=y.value.toLowerCase();return h.value.filter(k=>k.sub_model.toLowerCase().includes(n)||k.model_category.toLowerCase().includes(n)||k.grade.toLowerCase().includes(n))}),F=n=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0}).format(n),D=(n=null)=>{r.value=n,_.value=!0},S=()=>{_.value=!1,r.value=null},M=n=>{p.value=n,u.value=!0},w=()=>{u.value=!1,p.value=null},V=async()=>{if(p.value){t.value=!0;try{const{error:n}=await f.from("vehicles").delete().eq("id",p.value.id);if(n)throw n;d.success("ลบข้อมูลเรียบร้อยแล้ว"),await C()}catch(n){d.error("ลบข้อมูลไม่สำเร็จ: "+n.message),t.value=!1}}};I(()=>{C()});const z={vehicles:h,loading:t,searchQuery:y,showEditor:_,selectedVehicle:r,showDeleteModal:u,vehicleToDelete:p,fetchVehicles:C,filteredVehicles:U,formatPrice:F,openEditor:D,closeEditor:S,initiateDelete:M,closeDeleteModal:w,executeDelete:V,ref:a,computed:T,onMounted:I,get supabase(){return f},get toast(){return d},VehicleEditor:Re,DeleteConfirmModal:X};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},Ae={class:"flex justify-between items-center mb-6"},Ze={class:"relative w-64"},Je={key:0,class:"text-center py-12"},Ke={key:1,class:"bg-gray-800 rounded-xl overflow-hidden border border-gray-700 shadow-xl"},We={class:"w-full text-left text-gray-300"},Ye={class:"divide-y divide-gray-700"},$e={class:"px-6 py-4"},eo={class:"w-16 h-10 bg-gray-900 rounded border border-gray-600 overflow-hidden flex items-center justify-center"},oo=["src"],to={key:1,class:"text-xs text-gray-600"},ro={class:"px-6 py-4 font-medium text-white"},lo={class:"px-6 py-4"},so={class:"px-6 py-4"},io={class:"px-2 py-1 bg-gray-700 rounded text-xs"},no={class:"px-6 py-4 text-isuzu-red font-bold"},ao={class:"px-6 py-4 text-right space-x-2"},co=["onClick"],uo=["onClick"],go={key:0};function mo(j,o,h,t,y,_){return s(),i("div",null,[e("div",Ae,[e("div",Ze,[c(e("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.searchQuery=r),type:"text",placeholder:"ค้นหาชื่อรุ่น...",class:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white focus:border-isuzu-red focus:outline-none"},null,512),[[m,t.searchQuery]]),o[2]||(o[2]=e("svg",{class:"w-5 h-5 text-gray-400 absolute left-3 top-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("button",{onClick:o[1]||(o[1]=r=>t.openEditor()),class:"bg-isuzu-red hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors shadow-lg shadow-isuzu-red/20"},[...o[3]||(o[3]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" เพิ่มรถยนต์ ",-1)])])]),t.loading?(s(),i("div",Je,[...o[4]||(o[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-isuzu-red mx-auto"},null,-1),e("p",{class:"text-gray-400 mt-4"},"กำลังโหลดข้อมูล...",-1)])])):(s(),i("div",Ke,[e("table",We,[o[6]||(o[6]=e("thead",{class:"bg-gray-900 text-gray-400 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-4"},"รูปภาพ"),e("th",{class:"px-6 py-4"},"รุ่น (Category)"),e("th",{class:"px-6 py-4"},"รุ่นย่อย (Sub-Model)"),e("th",{class:"px-6 py-4"},"เกรด (Grade)"),e("th",{class:"px-6 py-4"},"ราคา"),e("th",{class:"px-6 py-4 text-right"},"จัดการ")])],-1)),e("tbody",Ye,[(s(!0),i(R,null,G(t.filteredVehicles,r=>(s(),i("tr",{key:r.id,class:"hover:bg-gray-700/50 transition-colors"},[e("td",$e,[e("div",eo,[r.image_url?(s(),i("img",{key:0,src:r.image_url,class:"w-full h-full object-cover"},null,8,oo)):(s(),i("span",to,"No Img"))])]),e("td",ro,x(r.model_category),1),e("td",lo,x(r.sub_model),1),e("td",so,[e("span",io,x(r.grade),1)]),e("td",no,x(t.formatPrice(r.price)),1),e("td",ao,[e("button",{onClick:u=>t.openEditor(r),class:"text-blue-400 hover:text-blue-300 transition-colors"}," แก้ไข ",8,co),e("button",{onClick:u=>t.initiateDelete(r),class:"text-red-400 hover:text-red-300 transition-colors"}," ลบ ",8,uo)])]))),128)),t.filteredVehicles.length===0?(s(),i("tr",go,[...o[5]||(o[5]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-500"}," ไม่พบข้อมูลรถยนต์ ",-1)])])):v("",!0)])])])),t.showEditor?(s(),W(t.VehicleEditor,{key:2,vehicle:t.selectedVehicle,onClose:t.closeEditor,onSaved:t.fetchVehicles},null,8,["vehicle"])):v("",!0),A(t.DeleteConfirmModal,{isOpen:t.showDeleteModal,itemName:t.vehicleToDelete?`${t.vehicleToDelete.model_category} ${t.vehicleToDelete.sub_model}`:"",onClose:t.closeDeleteModal,onConfirmed:t.executeDelete},null,8,["isOpen","itemName"])])}const Mo=Q(Ge,[["render",mo]]);export{Mo as default};
